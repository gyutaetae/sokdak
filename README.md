# sokdak Chat - 익명 암호화 메신저
# https://sokdak.duckdns.org

WebRTC 기반의 종단간 암호화(E2EE) P2P 채팅 애플리케이션입니다. 
세션이 종료되면 모든 대화 내용이 자동으로 삭제되어 완벽한 프라이버시를 보장합니다.

**카카오톡의 감시에 대한 대안 솔루션**

## 왜 속닥챗인가?

### 프라이버시는 기본 권리입니다
- 불법적인 일을 하지 않아도 **감시받지 않을 권리**가 있습니다
- 집에서 커튼을 치고 화장실 문을 잠그는 것처럼, 디지털 대화도 보호받아야 합니다

### 카카오톡의 문제점
- **서버측 암호화**: 카카오는 마스터 키를 가지고 있어, 경찰이나 국정원의 영장으로 대화 내용을 복호화해서 제출할 수 있습니다
- **최근 사찰 논란**: 카카오톡의 프라이버시 이슈로 인한 사용자 불신 증가

### sokdak의 차별점
- **E2EE (End-to-End Encryption)**: 당신과 대화 상대만 개인키를 가지고 있습니다. 서버는 암호화된 데이터를 전달만 할 뿐, 내용을 볼 수 없습니다
- **흔적 없는 소멸**: 디지털 대화도 현실 대화처럼 한번 뱉으면 사라져야 합니다 (잊힐 권리)
- **설치 불필요**: 텔레그램, 시그널과 달리 앱 설치나 전화번호 제공이 필요 없습니다

### 사용 시나리오
1. **조용한 장소에서의 민감한 대화**: 지하철, 카페에서 회사 상사 험담을 할 때
2. **정확한 정보 전달**: 링크, 계좌번호, 코드, 주소 같은 복잡한 정보를 복사/붙여넣기
3. **일회성 비밀 정보**: 회의실 비밀번호, 만남 장소 등 잠깐만 필요한 정보
4. **익명성 보장**: 전화번호나 이메일 없이 QR 코드나 링크만으로 즉시 연결

### Google Nearby Share / Apple AirDrop과의 비교
- **근접성 + 원격 모두 지원**: QR 코드 스캔으로 옆 사람과, 링크 공유로 지구 반대편 사람과도 연결 가능
- **웹 기반**: 앱 설치 흔적이 남지 않습니다
- **크로스 플랫폼**: 아이폰용, 갤럭시용 앱이 따로 필요 없습니다. 웹 브라우저만 있으면 됩니다

## 주요 기능

- **종단간 암호화 (E2EE)**: WebRTC의 DTLS/SRTP 기본 암호화 사용 - 제3자 접근 불가
- **P2P 직접 연결**: 서버를 거치지 않는 직접 데이터 전송 (DataChannel)
- **자동 삭제 타이머**: 메시지별로 1초~1분 자동 삭제 설정 가능
- **세션 기반**: 서버 메모리에만 임시 저장, DB 저장 없음
- **QR 코드 공유**: 쉬운 방 초대 기능
- **이미지 전송**: 텍스트 + 이미지 전송 지원
- **그룹 채팅**: 최대 3명까지 동시 대화 가능
- **설치 불필요**: 웹 브라우저만 있으면 즉시 사용
- **세션 자동 소멸**: 사용자가 나가면 3초 후 대화창 자동 닫힘
- **신비로운 디자인**: 다크 테마 기반의 보안 강조 UI

## 기술 스택

### 백엔드
- Node.js
- Express
- Socket.io (시그널링 서버)

### 프론트엔드
- 순수 HTML/CSS/JavaScript
- WebRTC (RTCPeerConnection, DataChannel)
- Socket.io Client
- QRCode.js (QR 코드 생성)
- jsQR (QR 코드 스캔)

## WebRTC P2P 연결 프로세스

1. **사용자 A**: 방 생성 → 시그널링 서버에 접속 → room-123 생성
2. **웹 앱**: room-123 URL이 담긴 QR 코드 생성
3. **사용자 B**: QR 스캔 → 시그널링 서버에 room-123 접속 요청
4. **시그널링 서버**: 두 사용자 모두 접속 확인
5. **WebRTC 프로세스 시작**:
   - A가 자신의 연결 정보(offer) 생성 → 서버 → B 전달
   - B가 offer를 받고 P2P 연결 정보(answer) 생성 → 서버 → A 전달
   - 두 사람은 네트워크 경로 정보(ICE candidates)를 찾아 서버를 통해 계속 교환
6. **RTCPeerConnection 연결 완료**
7. **RTCDataChannel 개방**
8. **P2P 직접 통신**: 이제 메시지는 시그널링 서버를 거치지 않고 직접 전송됨

## 세션 기반 소멸 메커니즘

1. **세션 생성**: 방 생성 시 서버 메모리에만 저장
2. **메시지 중계**: 메시지는 RAM에서 중계되고 즉시 삭제 (DB 저장 없음)
3. **세션 소멸**: 
   - 사용자가 브라우저를 닫으면 Socket.io의 `disconnect` 이벤트 감지
   - 서버는 해당 방을 메모리에서 삭제
   - 다른 사용자에게 "상대방이 나갔음"을 알림
   - 3초 후 채팅창 자동 비활성화

